
<header class="masthead">
  <div class="container h-100">
    <div class="row h-100">
      <div class="col-lg-7 my-auto">
        <div class="header-content mx-auto">
          <div class="container">
            <div class="row">
              <div class="col-sm-6 centered-form">
                    <form action="/campaigns/<%= campaign._id %>" method="post">
                      <div class="form-group">
                        <label for="title">Title</label>
                        <input type="text" name="title" class="form-control" value="<%= campaign.title %>">
                      </div>
                      <div class="form-group">
                        <label for="goal">Goal</label>
                        <input type="text" name="goal" class="form-control" value="<%= campaign.goal %>">
                      </div>
                      <div class="form-group">
                        <label for="description">Description</label>
                        <textarea
                          id="description"
                          name="description"
                          class="form-control">
                          <%= campaign.description %>
                        </textarea>
                      </div>
                      <div class="form-group">
                        <label for="category">Category</label><br>
                        <select name="category" id="category">
                          <% types.forEach((category) => { %>
                          <!-- This selects the campaign's category in the dropdown -->
                            <% if (category === campaign.category) { %>
                              <option
                                selected
                                type="text"
                                value="<%= category %>"
                                class="form-control">
                              <%= category %>
                              </option>
                            <% } else { %>
                              <option type="text" value="<%= category %>" class="form-control"><%= category %></option>
                            <% } %>
                          <%  }) %>
                        </select>
                      </div>
                      <div class="form-group">
                        <label for="deadline">Deadline</label>
                        <input type="date" name="deadline" class="form-control" value="<%= campaign.inputFormattedDate %>">
                      </div>

                      <!-- product edit select -->

                        <div class="form-group">
                          <label for="products">Products</label><br>
                          <select multiple name="products" id="products">
                            
                            <% products.forEach((currentproduct) => { %>
                            <!-- This selects the campaign's category in the dropdown -->
                              <% if (campaign.products.indexOf(currentproduct._id)) { %>
                                <option
                                  selected
                                  type="text"
                                  value="<%= campaign.products %>"
                                  class="form-control">
                                <%= currentproduct.name %>
                                </option>
                              <% } else { %>
                                <option type="text" value="<%= campaign.products %>" class="form-control"><%= currentproduct.name %></option>
                              <% } %>
                            <%  }) %>
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="deadline">Deadline</label>
                          <input type="date" name="deadline" class="form-control" value="<%= campaign.inputFormattedDate %>">
                        </div>


                      <div class="form-group">
                        <button type="submit">Update Campaign</button>
                      </div>
                    </form>
              <% if (typeof(errors) !== 'undefined'){ %>
                <div class="alert alert-danger">
                <ul>
                  <% for (let error in errors){ %>
                    <li><%= errors[error].message %></li>
                  <% } %>
                </ul>
                </div>
              <% } %>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  </header>
